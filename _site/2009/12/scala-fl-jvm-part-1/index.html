<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ru" lang="ru">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="google-site-verification" content="bb8epm6suyHfvYU-yFKhhYMyg3SQ__QndlyH-vBmiAk"/>
  <meta name='yandex-verification' content='74e7c4ae6d68c097'/>
  <meta name="viewport" content="width=950, maximum-scale=1.0" />
  <meta name="description" content="В сегодняшнем хайпе <strong>функциональных языках</strong> программирования <strong>Java</strong> программисты так же как и все испытывают потребность в каком-то языковом сахаре, функциональных плюшках, etc. Но Sun пока не дает всего этого в своём флагманском языке программирования в отличии от конкурентов, она придерживается консервативного подхода (хотя уже есть подвижки). В следствии всего этого, <strong>Java</strong> программисты смотрят на другие <strong>JVM</strong> языки (благо платформа дает все возможности для полета фантазии любого программиста), которые дают все блага описанные выше и многое другое. Один из таких языков это <strong>Scala (SCAlable LAnguage)</strong> — мультипарадигмальный язык программирования, без <strong>С</strong> подобного синтаксиса (с более лакониченым). В нем органично сочетаются возможности функционального и объектно ориентированного программирования." />
  <meta http-equiv="description" content="В сегодняшнем хайпе <strong>функциональных языках</strong> программирования <strong>Java</strong> программисты так же как и все испытывают потребность в каком-то языковом сахаре, функциональных плюшках, etc. Но Sun пока не дает всего этого в своём флагманском языке программирования в отличии от конкурентов, она придерживается консервативного подхода (хотя уже есть подвижки). В следствии всего этого, <strong>Java</strong> программисты смотрят на другие <strong>JVM</strong> языки (благо платформа дает все возможности для полета фантазии любого программиста), которые дают все блага описанные выше и многое другое. Один из таких языков это <strong>Scala (SCAlable LAnguage)</strong> — мультипарадигмальный язык программирования, без <strong>С</strong> подобного синтаксиса (с более лакониченым). В нем органично сочетаются возможности функционального и объектно ориентированного программирования."/> 
  <meta name="robots" content="all"/> 
  <meta name="resourse-type" content="document"/> 
  <meta name="document-state" content="dynamic"/> 
  <meta name="revisit-after" content="1 days"/> 
  <meta http-equiv="author" content="Anton Panasenko"/>
  <meta name="copyright" content="Copyright (C) 2011 "/> 
  <meta name="document-state" content="dynamic"/> 
  <link rev="made" href="anton.panasenko@gmail.com"/> 
  <meta http-equiv="reply-to" content="anton.panasenko@gmail.com"/> 
  <meta name="site-created" content="Anton Panasenko - blog.apanasenko.me"/> 
  <meta name="addres" content="blog.apanasenko.me"/> 
  <meta name="distribution" content="global"/> 
  <title>
    Scala FL JVM (part 1) -  Anton Panasenko
  </title>
  <link rel="stylesheet" href="/css/reset.css" type="text/css"/>
  
  <link rel="stylesheet" href="/css/screen.css" type="text/css"/>
  <link rel="stylesheet" href="/css/syntax.css" type="text/css"/>
  <link rel="stylesheet" media="only screen and (max-device-width: 480px)" href="/css/iphone.css" type="text/css"/>
  <link rel="stylesheet" media="only screen and (max-device-width: 1024px)" href="/css/ipad.css" type="text/css"/>
  <link rel="alternate" type="application/atom+xml" href="http://feeds.feedburner.com/apanasenko"/>
  <link href="/images/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <link href="/images/icon.jpg" rel="apple-touch-icon"/>
</head>
<body>
  <div id="wrapper">
    <div class="center"><a href="http://blog.apanasenko.me/"><img class="header" alt="header image" src="/images/header.jpg"/></a></div>
    <div id="inner">
      <div id="container">
        <div id="header">
          <h1>
            
              <a href="/">&larr; Anton Panasenko</a>
            
          </h1>
          <ul class="header">
            <li>
              <a href="/archive">Archive</a>
            </li>
	    <li>
		<a href="http://ru.linkedin.com/in/apanasenko/">LinkedIn <span class="arrow">&rarr;</span></a>
	    </li>
            <li>
		<a href="http://github.com/dieu">Github <span class="arrow">&rarr;</span></a>
            </li>
            <li>
              <a href="http://twitter.com/apanasenko">Twitter <span class="arrow">&rarr;</span></a>
            </li>
          </ul>
          <hr class="right"/>
        </div>
        <h2>Scala FL JVM (part 1)</h2>
        

<span id="article_buttons">
  <a id="tweet">
    <span class="balloon">tweet!</span> <img src="/images/tweet.png"/ alt="tweet"/>
  </a>
  <a href="http://feeds.feedburner.com/apanasenko">
    <span class="balloon">subscribe!</span> <img src="/images/feed.png" alt="feed"/> 
  </a>
</span>

<hr/>

<div id="content">
	<div style="text-align:center;">
<p><img src="http://lh6.ggpht.com/_wN3Yn5K_LYs/SyTg_KXBQOI/AAAAAAAAAIs/vP10ZF48vtk/newsflash_logo.png?imgmax=800" alt="newsflash_logo.png" border="0" width="646" height="93" /></div></p>
<p>В сегодняшнем хайпе <strong>функциональных языках</strong> программирования <strong>Java</strong> программисты так же как и все испытывают потребность в каком-то языковом сахаре, функциональных плюшках, etc. Но Sun пока не дает всего этого в своём флагманском языке программирования в отличии от конкурентов, она придерживается консервативного подхода (хотя уже есть <a href="http://www.jroller.com/scolebourne/entry/closures_in_jdk_7">подвижки</a>). В следствии всего этого, <strong>Java</strong> программисты смотрят на другие <strong><span class="caps">JVM</span></strong> языки (благо платформа дает все возможности для полета фантазии любого программиста), которые дают все блага описанные выше и многое другое. Один из таких языков это <strong>Scala (SCAlable LAnguage)</strong> — мультипарадигмальный язык программирования, без <strong>С</strong> подобного синтаксиса (с более лакониченым). В нем органично сочетаются возможности функционального и объектно ориентированного программирования.</p>
<h4>История</h4>
<p>Язык был создан в 2001—2004 годах в Лаборатории методов программирования <a href="http://ru.wikipedia.org/wiki/EPFL"><span class="caps">EPFL</span></a>. Автором языка считается <a href="http://people.epfl.ch/martin.odersky">Martin Odersky</a> создатель языка <strong>Pizza</strong>, который стал прототипом <strong>Generic</strong> в <strong>Java</strong>. Он стал результатом исследований, направленных на разработку улучшенной языковой поддержки компонентного ПО. За основу при разработке языка были взяты 2 идеи:</p>
<ol>
	<li>Язык программирования компонентного ПО должен быть масштабируемым в том смысле, что должна быть возможность с помощью одних и тех же концепций описать как маленькие, так и большие части. Поэтому внимание было сконцентрировано на механизмах абстракции, композиции и декомпозиции вместо введения большого количества примитивов, которые могут быть полезными только на каком-то одном уровне масштабирования.</li>
	<li>Масштабируемая поддержка компонентов может быть предоставлена языком программирования, унифицирующим и обобщающим объектно-ориентированное и функциональное программирование. Некоторые из основных технических новшеств Scala — это концепции, представляющие собой сплав этих парадигм программирования. В статически типизированных языках, к которым относится Scala, эти парадигмы до сих пор были почти полностью разделены.</li>
</ol>
<p><strong>Scala</strong> была выпущена для общего пользования на платформе <strong><span class="caps">JVM</span></strong> в январе 2004 года и на платформе <strong>.<span class="caps">NET</span></strong> в июне 2004 года. Планируется продолжить работу над формализацией ключевых аспектов языка и над разработкой оптимизаций, выполняемых компилятором.</p>
<h4>Истоки дизайна</h4>
<p>Конечно, <strong>Scala</strong> впитала значительное число концепций и синтаксических соглашений <strong>Java</strong> и <strong>C#</strong>. Способ выражения свойств во многом заимствован из <strong>Sather</strong>. Из <strong>Smalltalk</strong> взята концепция унифицированной объектной модели. Из <strong>Beta</strong> пришла идея, что всё, включая классы, должно допускать вложенность. Абстрактные типы в <strong>Scala</strong> очень похожи на абстрактные типы сигнатур в <strong><span class="caps">SML</span></strong> и <strong>OCaml</strong>, обобщенные в контексте полноценных компонентов. В некотором смысле <strong>Scala</strong> — это продолжение работы <strong>Pizza</strong>. Как и <strong>Pizza</strong>, <strong>Scala</strong> компилируется под <strong>Java VM</strong>, добавляя функции высшего порядка, сопоставление с образцом, конструкции, которые исходно были созданы в сообществе функционального программирования. В то время как <strong>Pizza</strong> обратно совместима с <strong>Java</strong>, цель <strong>Scala</strong> — всего лишь возможность взаимодействия, так что у нее больше степеней свободы в дизайне. Ещё одна цель <strong>Scala</strong> — предоставить расширенные конструкции для абстракции и композиции компонентов — общая с несколькими недавними исследовательскими разработками.</p>
<h4>Ключевые аспекты языка</h4>
<ol>
	<li>Scala-программы во многом похожи на Java-программы, и могут свободно взаимодействовать с Java-кодом.</li>
	<li>Scala включает единообразную объектную модель — в том смысле, что любое значение является объектом, а любая операция — вызовом метода.</li>
	<li>Scala — это также функциональный язык в том смысле, что функции — это полноправные значения.</li>
	<li>В Scala включены мощные и единообразные концепции абстракций как для типов, так и для значений.</li>
	<li>Она содержит гибкие симметричные конструкции примесей для композиции классов и trait-ов.</li>
	<li>Она позволяет производить декомпозицию объектов путем сравнения с образцом.</li>
	<li>Образцы и выражения были обобщены для поддержки естественной обработки <span class="caps">XML</span>-документов.</li>
	<li>В целом, эти конструкции позволяют легко выражать самостоятельные компоненты, использующие библиотеки Scala, не пользуясь специальными языковыми конструкциями.</li>
	<li>Scala допускает внешние расширения компонентов с использованием видов (views).</li>
	<li>Есть поддержка структурных и экзистенциальных типов.</li>
	<li>На текущий момент Scala реализована на платформах Java и .<span class="caps">NET</span>.</li>
</ol>
<h4>Различия синтаксиса по сравнению с Java</h4>
<ol>
	<li><strong>Hello World и Object</strong>:</li>
</ol>
<div>
<pre>
<code class='scala'>object HelloWorld {
def main(arg: Array[String]) {
println(&quot;Hello, world!&quot;)
}
<p>}</code><br />
  </pre></p>
</div>
<p>В Scala можно объявить отдельные объекты, которые буду себя вести согласно паттерну <a href="http://ru.wikipedia.org/wiki/Одиночка_(шаблон_проектирования)">Singelton</a>. Из этого листинга видно, что массивы типизируются с помощью <strong>[]</strong>, а не как обычно в <strong>Java, &lt;&gt;</strong>. Доступ к элементам массива происходит через оператор <strong>()</strong></p>
<div>
<pre>
<code class='scala'>object HelloWorld {
def main(arg: Array[String]) {
println(&quot;Hello, world! &quot; + arg(0))
}
<p>}</code><br />
  </pre></p>
</div>
<ol>
	<li><strong>Функции(Методы)</strong>:<br />
Функции как видно из листинга выше объявляются с помощью ключевого слова <strong>def</strong>, так же перед объявлением функции могут быть указаны модификаторы доступа <strong>private, protected</strong> (по умолчанию всем методам выставляется модификатор <strong>public</strong>, который отсутствует в явном виде). Есть еще один интересный момент, с помощью которого можно типизировать модификаторы доступа, как и обычные типы, накладывая тем самым на методы и поля больше ограничений.</li>
</ol>
<div>
<pre>
<code class='scala'>object HelloWorld {
def main(arg: Array[String]) {
println(hello + world)
}
private[HelloWorld] def hello() = &quot;Hello, &quot;
protected[this] def world() = &quot;World!&quot;
<p>}</code><br />
  </pre></p>
</div>
<p>Так же в <strong>Scala</strong> методы и операторы однозначны, т.е. в <strong>Scala</strong> по сравнению с <strong>Java</strong> появилась возможность перегрузки операторов.</p>
<div>
<pre>
<code class='scala'>class Complex(r: Double, i: Double) {
def real = r
def image = i
def magnitude = Math.sqrt(r * r + i * i)
def angle = Math.atan2(i, r)
def +(that: Complex) = new Complex(this.real + that.real, this.image + that.image)
override def toString = real + &quot; + i*&quot; + image + &quot; | &quot; + magnitude + &quot;<strong>e^(i</strong>&quot; + angle + &quot;))&quot;
<p>}</code><br />
  </pre></p>
</div>
<p>Модификатор <strong>override</strong>, как уже можно было заметить обязателен когда вы хотите перегрузить метод.</p>
<ol>
	<li><strong>Классы</strong>:</li>
</ol>
<div>
<pre>
<code class='scala'>class Point2d(x: Float, y: Float) {
def length = Math.sqrt(x * 2, y * y)
override def toString = &quot;(&quot; + x + &quot;, &quot; + y + &quot;)&quot;
<p>}</code><br />
  </pre></p>
</div>
<p>Как видно из листинга примера, объявление класса отличается от Java, сразу рядом с названием можно объявить &#8220;простой&#8221; конструктор, тем самым сохранив начальные поля класса, но так же существует и способ объявления конструктора обычным способом.</p>
<div>
<pre>
<code class='scala'>class Point2d {
var x: Float
var y: Float
def this(x: Float, y: Float) {
this.x = x; this.y = y
}
def length = Math.sqrt(x * 2, y * y)
override def toString = ”(” + x + ”, ” + y + ”)”
<p>}</code><br />
  </pre></p>
</div>
<p>Из этого листинга так же видно, что &#8220;;&#8221; не обязательный знак как в Java, а применяется только тогда когда надо явно указать разделение операций, в остальных случаях достаточно перевода строки. Так же видно, что для указания типа используется &#8220;:&#8221; как у переменных, так и у методов. Так же у переменных существуют модификаторы <strong>var</strong> и <strong>val</strong>, которые делают переменные изменяемыми и не изменяемыми соответственно.</p>
<ol>
	<li><strong>Traits</strong>:</li>
</ol>
<p>Trait — это интерфейс, который может содержать реализации методов, но не может содержать поля. В этом смысле в Scala есть множественное наследование.</p>
<div>
<pre>
<code class='scala'>trait Comparable[T] {
def compareTo(that: T): Int
def &gt;(that: T) = compareTo(that) &gt; 0
def &gt;=(that: T) = compareTo(that) &gt;= 0
def ==(that: T) = compareTo(that) == 0
def &lt;(that: T) = compareTo(that) &lt; 0
def &lt;=(that: T) = compareTo(that) &lt;= 0
<p>}<br />
class Fraction(num: Int, denom: Int) extends Comparable[Fraction] { <br />
  def compareTo(that: Fraction) = this.num * that.denom &#8211; that.num * this.denom<br />
} <br />
new Fraction(3, 4) &gt; new Fraction(1, 2) // возвращает true</code><br />
  </pre></p>
</div>
<ol>
	<li><strong>Mixin</strong>:</li>
</ol>
<div>
<pre>
<code class='scala'>object Pets {
def main(arg: Array[String]) {
println(new Pet(&quot;Martin&quot;)) //Martin
println(new Pet(&quot;Martin&quot;) with PetName) //Name: Martin
}
<p>}<br />
class Pet(val name:String) {<br />
  override def toString = name<br />
}<br />
trait PetName {<br />
  override def toString = &quot;Name: &quot; + super.toString<br />
}</code><br />
  </pre></p>
</div>
<h4>Небольшой пример</h4>
<p>На <strong>Java</strong>:</p>
<div>
<pre>
<code class='scala'>public class QuicksortJava {
private static void doSort(int start, int end, int[] array) {
if (start &gt;= end)
return;
int i = start, j = end;
int cur = i &#8211; (i &#8211; j) / 2;
while (i &lt; j) {
while (i &lt; cur &amp;&amp; (array[i] &lt;= array[cur])) {
i++;
}
while (j &gt; cur &amp;&amp; (array[cur] &lt;= array[j])) {
j&#8212;;
}
if (i &lt; j) {
int temp = array[i];
array[i] = array[j];
array[j] = temp;
if (i == cur)
cur = j;
else if (j == cur)
cur = i;
}
}
doSort(start, cur, array);
doSort(cur + 1, end, array);
}
public void sort(int[] xs) {
doSort(0, xs.length &#8211; 1, xs);
}
public static void main(String[] arg) {
int[] xs = new int[]{5, 4, 3, 2, 1, 0};
new QuicksortJava().sort(xs);
System.out.println(Arrays.toString(xs));
}
<p>}</code><br />
  </pre></p>
</div>
<p>и <strong>Scala</strong>:</p>
<div>
<pre>
<code class='scala'>object Quicksort {
def sort(xs: Array[Int]): Array[Int] = {
if (xs.length &lt;= 1) xs
else {
val pivot = xs(xs.length / 2)
Array.concat(
sort(xs filter (pivot &gt;)),
xs filter (pivot ==),
sort(xs filter (pivot &lt;)))
}
}
def main(arg:Array[String]) = {
val xs = Array(5, 4, 3, 2, 1, 0)
println(sort(xs).toString)
}
<p>}</code><br />
  </pre></p>
</div>

	
		<h4>Posted 13 Dec 2009 by Anton Panasenko | tags:
		 
			
				<a href="/search/label/fl">fl</a>,
			 
		 
			
				<a href="/search/label/fp">fp</a>,
			 
		 
					
				<a href="/search/label/jvm">jvm</a>
			 
		 
			
				and <a href="/search/label/scala">scala</a>.
			 
		
	</h4>
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://dieu.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>

<!--

-->

      </div>

      <div id="slide_bar">
		<div id="subscribe">
			<a href="http://feeds.feedburner.com/apanasenko" rel="alternate" title="feed" type="application/rss+xml"><img alt="rss" src="http://lh3.ggpht.com/_wN3Yn5K_LYs/SviFaWzVaAI/AAAAAAAAACE/t5QGxBDsiMs/rss.png"/></a>
		</div>	
        <div id="cloud_tag">
          <div id="cloud_tag_div">
                <ol id="tag-cloud"><li title="1 post"><a href="/search/label/actors">actors</a></li> <li title="1 post"><a href="/search/label/alice">alice</a></li> <li title="2 posts"><a href="/search/label/amazon">amazon</a></li> <li title="1 post"><a href="/search/label/apple">apple</a></li> <li title="1 post"><a href="/search/label/aws">aws</a></li> <li title="1 post"><a href="/search/label/azure">azure</a></li> <li title="1 post"><a href="/search/label/blog">blog</a></li> <li title="1 post"><a href="/search/label/book">book</a></li> <li title="1 post"><a href="/search/label/build">build</a></li> <li title="1 post"><a href="/search/label/cassandra">cassandra</a></li> <li title="1 post"><a href="/search/label/chef">chef</a></li> <li title="1 post"><a href="/search/label/client">client</a></li> <li title="1 post"><a href="/search/label/clips">clips</a></li> <li title="1 post"><a href="/search/label/clojure">clojure</a></li> <li title="1 post"><a href="/search/label/cloud">cloud</a></li> <li title="1 post"><a href="/search/label/consistent">consistent</a></li> <li title="1 post"><a href="/search/label/db">db</a></li> <li title="1 post"><a href="/search/label/deploy">deploy</a></li> <li title="1 post"><a href="/search/label/django">django</a></li> <li title="2 posts"><a href="/search/label/dvcs">dvcs</a></li> <li title="2 posts"><a href="/search/label/ec2">ec2</a></li> <li title="4 posts"><a href="/search/label/erlang">erlang</a></li> <li title="5 posts"><a href="/search/label/fl">fl</a></li> <li title="5 posts"><a href="/search/label/fp">fp</a></li> <li title="1 post"><a href="/search/label/gen_server">gen_server</a></li> <li title="1 post"><a href="/search/label/gfs">gfs</a></li> <li title="1 post"><a href="/search/label/git">git</a></li> <li title="1 post"><a href="/search/label/github">github</a></li> <li title="2 posts"><a href="/search/label/google">google</a></li> <li title="2 posts"><a href="/search/label/grid">grid</a></li> <li title="1 post"><a href="/search/label/hash">hash</a></li> <li title="2 posts"><a href="/search/label/hg">hg</a></li> <li title="1 post"><a href="/search/label/ipad">ipad</a></li> <li title="2 posts"><a href="/search/label/java">java</a></li> <li title="1 post"><a href="/search/label/jekyll">jekyll</a></li> <li title="3 posts"><a href="/search/label/jvm">jvm</a></li> <li title="1 post"><a href="/search/label/mac os">mac os</a></li> <li title="1 post"><a href="/search/label/mapreduce">mapreduce</a></li> <li title="1 post"><a href="/search/label/mercurial">mercurial</a></li> <li title="2 posts"><a href="/search/label/nosql">nosql</a></li> <li title="1 post"><a href="/search/label/objective-c">objective-c</a></li> <li title="1 post"><a href="/search/label/osgi">osgi</a></li> <li title="1 post"><a href="/search/label/pax">pax</a></li> <li title="1 post"><a href="/search/label/python">python</a></li> <li title="2 posts"><a href="/search/label/rabbitmq">rabbitmq</a></li> <li title="1 post"><a href="/search/label/ruby">ruby</a></li> <li title="3 posts"><a href="/search/label/scala">scala</a></li> <li title="1 post"><a href="/search/label/scheme">scheme</a></li> <li title="1 post"><a href="/search/label/server">server</a></li></ol>

          </div>
        </div>
		<br/>
		<div id="iready">
	    	<ol>
<li><a href="http://alenacpp.blogspot.com/">Алена С++</a></li>
<li></li>
<li><a href="http://samolisov.blogspot.com/">Челябинский Программист</a></li>
</ol>
        </div>
        <br/>
      </div> 
    </div>
  </div>

  <script src="/js/jquery.js" type="text/javascript"></script>
  <script src="/js/twitter.js" type="text/javascript"></script>
  <script type="text/javascript">
	var disqus_shortname = 'dieu';
	(function () {
	    var s = document.createElement('script'); s.async = true;
	    s.src = 'http://disqus.com/forums/dieu/count.js';
	    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
	}());
  </script>

  
<!-- Yandex.Metrika counter -->
<div style="display:none;"><script type="text/javascript">
(function(w, c) {
    (w[c] = w[c] || []).push(function() {
        try {
            w.yaCounter445478 = new Ya.Metrika(445478);
             yaCounter445478.clickmap(true);
             yaCounter445478.trackLinks(true);
        
        } catch(e) { }
    });
})(window, 'yandex_metrika_callbacks');
</script></div>
<script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script>
<noscript><img src="//mc.yandex.ru/watch/445478" style="position:absolute; left:-9999px;" alt="" /></noscript>
<!-- /Yandex.Metrika counter -->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-6891853-5']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
